# Вариант 4
## 4.1 Задача о распределении инвестиций между проектами


|$| A | B | C| D|E|
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|
| 100  | 3 | 5 | 4 | 7 | 1 |
| 200  | 7 | 11| 8 | 9 | 12|
| 300  | 9 | 12| 14| 10| 13|
| 400  | 14| 16| 16| 14| 14|
| 500  | 20| 18| 19| 17| 15|

Требуется распределить 500 единиц инвестиций между пятью проектами так, чтобы суммарная прибыль была максимальной.

### 1 шаг - Распределение инвестиций
На каждом этапе добавляется один новый проект и вычисляется оптимальный результат для всех возможных объемов инвестиций (от 100 до 500). Таким образом, каждая новая таблица учитывает решения предыдущей.  

1. Распределим инвестиции между проектами А и В, выбирая максимальное значение и запоминая, каким образом это получилось

| А | В | Выбор|| A | B | Выбор || A | B | Выбор || A | B | Выбор 
|:-:|:-:|:----:|:-:|:-:|:----:|:-:|:-:|:-:|:---:|:-:|:-:|:-:|:-:|:-:|
|0|2| → 11|   |0|3| → 12|    |0|4| → 16|    |0|5| → 18|
|1|1| → 8|    |1|2| → 14|    |1|3| → 15|    |1|4| → 19|
|2|0| → 7|    |2|1| → 12|    |2|2| → 18|    |2|3| → 19|
| | |    |    |3|0| → 9 |    |3|1| → 14|    |3|2| → 20|
| | |    |    | | |     |    |4|0| → 14|    |4|1| → 19|
| | |    |    | | |     |    | | |     |    |5|0| → 20|


Занесем в таблицу:
|$| A | B | C| D|E| А:В|
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
| 100  | 3 | 5 | 4 | 7 | 1 | 5 (0/1)
| 200  | 7 | 11| 8 | 9 | 12| 11 (0/2)
| 300  | 9 | 12| 14| 10| 13| 14 (1/2)
| 400  | 14| 16| 16| 14| 14| 18 (2/2)
| 500  | 20| 18| 19| 17| 15| 20 (3/2)

2. Распределим инвестиции между проектами А:В и С, выбирая максимальное значение и запоминая, каким образом это получилось

| А:В | С | Выбор||  А:В | С | Выбор ||  А:В | С | Выбор ||  А:В | С | Выбор 
|:-:|:-:|:----:|:-:|:-:|:----:|:-:|:-:|:-:|:---:|:-:|:-:|:-:|:-:|:-:|
|0|2| → 8|    |0|3| → 14|    |0|4| → 16|    |0|5| → 19|
|1|1| → 9|    |1|2| → 13|    |1|3| → 19|    |1|4| → 21|
|2|0| → 11|   |2|1| → 15|    |2|2| → 19|    |2|3| → 25|
| | |    |    |3|0| → 14|    |3|1| → 18|    |3|2| → 22|
| | |    |    | | |     |    |4|0| → 18|    |4|1| → 22|
| | |    |    | | |     |    | | |     |    |5|0| → 20|

Занесем в таблицу:
|$| A | B | C| D|E| А:В| (А:В):С |
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
| 100  | 3 | 5 | 4 | 7 | 1 | 5 (0/1) | 5 (1/0)
| 200  | 7 | 11| 8 | 9 | 12| 11 (0/2)| 11 (2/0)
| 300  | 9 | 12| 14| 10| 13| 14 (1/2)| 15 (2/1)
| 400  | 14| 16| 16| 14| 14| 18 (2/2)| 19 (1/3)
| 500  | 20| 18| 19| 17| 15| 20 (3/2)| 25 (2/3)

3. Распределим инвестиции между проектами А:В:С и D, выбирая максимальное значение и запоминая, каким образом это получилось

| А:В:С | D | Выбор|| А:В:С | D | Выбор || А:В:С | D | Выбор || А:В:С| D | Выбор 
|:-:|:-:|:----:|:-:|:-:|:----:|:-:|:-:|:-:|:---:|:-:|:-:|:-:|:-:|:-:|
|0|2| → 9|    |0|3| → 10|    |0|4| → 14|    |0|5| → 17|
|1|1| → 12|    |1|2| → 14|    |1|3| → 15|    |1|4| → 19|
|2|0| → 11|   |2|1| → 18|    |2|2| → 20|    |2|3| → 21|
| | |    |    |3|0| → 15|    |3|1| → 22|    |3|2| → 24|
| | |    |    | | |     |    |4|0| → 19|    |4|1| → 26|
| | |    |    | | |     |    | | |     |    |5|0| → 25|

Занесем в таблицу:
|$| A | B | C| D|E| А:В| (А:В):С |(А:В:С): D|
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
| 100  | 3 | 5 | 4 | 7 | 1 | 5 (0/1) | 5 (1/0) | 7 (0/1)|
| 200  | 7 | 11| 8 | 9 | 12| 11 (0/2)| 11 (2/0)| 12 (1/1)|
| 300  | 9 | 12| 14| 10| 13| 14 (1/2)| 15 (2/1)|18 (2/1)|
| 400  | 14| 16| 16| 14| 14| 18 (2/2)| 19 (1/3)|22 (3/1)|
| 500  | 20| 18| 19| 17| 15| 20 (3/2)| 25 (2/3)|26 (4/1)|


4. Ответ должен быть в самой правой нижней ячейке, чтобы его получить не обязательно досчитывать весь последений столбик нашей таблицы, так как для вычисления распределения нам нужно знать прибыль только от первых 4 проектов (уже посчитано в последнем столбце) и отдельно 5 проект

Посчитаем лишь это:

|А:В:С:D | Е | Выбор|
|:-----:|:-----:|:-----:|
|0|5| → 15|
|1|4| → 21|
|2|3| → 25|
|3|2| → 30|
|4|1| → 23|
|5|0| → 26|

5.  Занесем в таблицу:

|$| A | B | C| D|E| А:В| (А:В):С |(А:В:С): D|(А:В:С:D):Е|
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
| 100  | 3 | 5 | 4 | 7 | 1 | 5 (0/1) | 5 (1/0) | 7 (0/1)|
| 200  | 7 | 11| 8 | 9 | 12| 11 (0/2)| 11 (2/0)| 12 (1/1)|
| 300  | 9 | 12| 14| 10| 13| 14 (1/2)| 15 (2/1)|18 (2/1)|
| 400  | 14| 16| 16| 14| 14| 18 (2/2)| 19 (1/3)|22 (3/1)|
| 500  | 20| 18| 19| 17| 15| 20 (3/2)| 25 (2/3)|26 (4/1)| 30 (3/2)

### 2 шаг - Получение оптимального решения
Из нижней части таблицы видно, что максимальная прибыль составляет **30$**. Она достиагется, если распределить исходную суммму следующим образом:

1. В таблице (A:В:С:D):E максимальная прибыль 30 достигается при  
   **E = 2 части**, а **A:В:С:D = 3 части**.

2. В таблице (A:В:С): D видно, что при 3 частях проект D получает  
   **1 часть**, а на A:В:С остаётся 2 части.

3. В таблице (A:В):C указано, что при 2 частях  
   **C получает 0 части**, а A:В делят между собой 2 части.

4. В таблице A:B при 2 блоках лучший выбор:  
   **A = 0 части**, **B = 2 части**.

### Ответ:
Распределение сумм инвестиций между всеми проектами:

| Проект | Часть | Инвестиции |
|:------:|:------------------:|:-----------:|
| A | 0 | 0 |
| B | 2 | 200 |
| C | 0 | 0 |
| D | 1 | 100 |
| E | 2 | 200 |

Максимальную сумма прибыли от инвестиций равна **30**


## 4.2 Конвейерная задача
Имеется 9 независимых заданий. Длительность заданий (по этапам): (3, 1), (9, 10), (7, 6), (9, 11), (12, 6), (7, 8), (5, 4), (6, 7), (2, 1)

Требуется построить расписание выполнения заданий в кратчайшие сроки.

### 1 шаг - Перенос данных в таблицу 

Перенесем данные в таблицы и пронумеруем их в алфавитном порядке.
|| А | B | C | D | E | F | G | H | I |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
| 1 | 3 | 9 | 7 | 9 | 12| 7 | 5 | 6 | 2|
| 2 | 1 | 10| 6 | 11| 6 | 8 | 4 | 7 | 1| 

### 2 шаг - Распределение по группам

Кратчайшее расписание будем искать, используя алгоритм Джонсана

Разобьем список всех заданий на две группы. В первую группу задания, у которых первое число $\le$ второму числу. Во вторую группу - все остальные задания (первое число > второго)

Задания из первой группы сортируем в порядке возрастания первых величин. Задания из второй группы отсортируем в порядке убывания вторых величин.

Получим:

**1 группа** - H, F, B, D
**2 группа** - C, E, G, A, I  

По алгоритму Джонсона мы получаем оптимальный порядок выполнения заданий: H, F, B, D, C, E, G, A, I

### 3 шаг - Диаграмма Ганта
 
Построим соответствующее расписание в виде диаграммы Ганта:

|Первый конвейер| H (0-6) | F (6-13) | B (13-22) | D (22-31) | C (31-38) | E (38-50) | G (50-55) | A (55-58) | I (58-60) |   (60-62) |
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|Второй конвейер|          | H (6-13) | F (13-21) | B (22-32) | D (32-43) | C (43-49) | E (50-56) | G (56-60) | A (60-61) | I (61-62) |

### Ответ:
Оптимальный порядок: **H, F, B, D, C, E, G, A, I**  
Минимальное время выполнения: **62** единицы времени

```mermaid
gantt
    title  Диаграмма Ганта 
    dateFormat HH
    axisFormat %H
    todayMarker off

    section I конвейер
    H           :s1h, 0, 6h
    F           :s1f, after s1h, 7h
    B           :s1b, after s1f, 9h
    D           :s1d, after s1b, 9h
    C           :s1c, after s1d, 7h
    E           :s1e, after s1c, 12h
    G           :s1g, after s1e, 5h
    A           :s1a, after s1g, 3h
    I           :s1i, after s1a, 2h

    section II конвейер
    H           :s2h, after s1h, 7h
    F           :s2f, after s2h, 8h
    %% Ждём завершения первого конвейера B, поэтому старт после s1b
    B           :s2b, after s1b, 10h
    D           :s2d, after s2b, 11h
    C           :s2c, after s2d, 6h
    %% E не может стартовать раньше окончания s1e (и previous s2 уже свободен), ставим after s1e
    E           :s2e, after s1e, 6h
    G           :s2g, after s2e, 4h
    A           :s2a, after s2g, 1h
    I           :s2i, after s2a, 1h

    Общее время 62 ед : milestone, m2, after s2i, 0h