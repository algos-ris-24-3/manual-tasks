# Вариант 3
# Задание 4.1
|   &   |   A   |   B   |   C   |   D   |
|:------|:-----:|:-----:|:-----:|:-----:|
| 30    | 6     | 8     | 4     | 7     |
| 60    | 8     | 9     | 5     | 8     |
| 90    | 11    | 11    | 7     | 12    |
| 120   | 12    | 14    | 10    | 15    |
| 150   | 14    | 15    | 12    | 16    |

Все значения являются кратными друг другу, 30 - это одна часть, каждое следующее число содержит в себе от 2 до 5 частей соответственно.

## Подготавливаем вспомогательную таблицу:

|   &   |  A:B  |(A:B):C|(A:B:C):D|
|:------|:-----:|:-----:|:-----:|
| 30    |       |       |       |
| 60    |       |       |       |
| 90    |       |       |       |
| 120   |       |       |       |
| 150   |       |       |       |

## Заполняем столбец (A:B):

Для строки 30:

|       |  A:B  |       
|:------|:-----:|
| 1/0   |   6   |
| *0/1*   |   *8*   |

Для строки 60:

|       |  A:B  |       
|:------|:-----:|
| 2/0   |   8   |
| *1/1*   |   *14*  |
| 0/2   |   9   |

Для строки 90:

|       |  A:B  |       
|:------|:-----:|
| 3/0   |   11  |
| *2/1*   |   *16*  |
| 1/2   |   15  |
| 0/3   |   11  |

Для строки 120:

|       |  A:B  |       
|:------|:-----:|
| 4/0   |   12  |
| *3/1*   |   *19*  |
| 2/2   |   17  |
| 1/3   |   17  |
| 0/4   |   14  |

Для строки 150:

|       |  A:B  |       
|:------|:-----:|
| 5/0   |   14  |
| *4/1*   |   *20*  |
| *3/2*   |   *20*  |
| 2/3   |   19  |
| *1/4*   |   *20*  |
| 0/5   |   15  |

Выбираем из каждой таблицы наибольшее число (выделено курсивом) в соответствующую строку вместе с отношением. В последнем случае, где у нас совпали результаты, выбираем любой.

|   &   |  A:B  |(A:B):C|(A:B:C):D|
|:------|:-----:|:-----:|:-----:|
| 30    |8 (0/1)|       |       |
| 60    |14(1/1)|       |       |
| 90    |16(2/1)|       |       |
| 120   |19(3/1)|       |       |
| 150   |20(1/4)|       |       |

## Заполняем столбец ((A:B):C):

Для строки 30:

|       |(A:B):C|       
|:------|:-----:|
| *1/0*   |   *8*   |      
| 0/1   |   4   |     

Для строки 60:

|       |(A:B):C|       
|:------|:-----:|
| *2/0*   |   *14*   |
| 1/1   |   12  |
| 0/2   |   5   |

Для строки 90:

|       |(A:B):C|       
|:------|:-----:|
| 3/0   |   16  |
| *2/1*   |   *18*  |
| 1/2   |   13  |
| 0/3   |   7   |

Для строки 120:

|       |(A:B):C|       
|:------|:-----:|
| 4/0   |   19  |
| *3/1*   |   *20*  |
| 2/2   |   19  |
| 1/3   |   18  |
| 0/4   |   10  |

Для строки 150:

|       |(A:B):C|       
|:------|:-----:|
| 5/0   |   20  |
| *4/1*   |   *23*  |
| 3/2   |   21  |
| 2/3   |   21  |
| 1/4   |   18  |
| 0/5   |   12  |

Выбираем из каждой таблицы наибольшее число (выделено курсивом) в соответствующую строку вместе с отношением.

|   &   |  A:B  |(A:B):C|(A:B:C):D|
|:------|:-----:|:-----:|:-----:|
| 30    |8 (0/1)|8(1/0)|       |
| 60    |14(1/1)|14(2/0)|       |
| 90    |16(2/1)|18(2/1)|       |
| 120   |19(3/1)|20(3/1)|       |
| 150   |20(1/4)|23(4/1)|       |

## Заполняем столбец ((A:B:C):D):

Ответ будет храниться в нижней ячейке последнего столбца. Так как для того, чтобы его найти нам не нужно находить значения столбцов выше, то сразу переходим к вычислению его значения.

Для строки 150:

|       |(A:B:C):D|       
|:------|:-----:|
| 5/0   |   23  |
| *4/1*   |   *27*  |
| 3/2   |   26  |
| 2/3   |   26  |
| 1/4   |   23  |
| 0/5   |   16  |

Вносим максимальное вместе с отношением в ячейку. Это и есть максимальная прибыль которую мы можем получить.

|   &   |  A:B  |(A:B):C|(A:B:C):D|
|:------|:-----:|:-----:|:-----:|
| 30    |8 (0/1)|8(1/0)|       |
| 60    |14(1/1)|14(2/0)|       |
| 90    |16(2/1)|18(2/1)|       |
| 120   |19(3/1)|20(3/1)|       |
| 150   |20(1/4)|23(4/1)|27(4/1)|

## Находим значения A, B, C, D:

Для того чтобы найти, сколько должно уйти на каждый проект, идём через отношения в обратном порядку от финальной ячейки.

27(4/1) --> **D: 30** (A:B:C): 120 

20(3/1) --> **C: 30** (A:B): 90

16(2/1) --> **B: 30 A: 60**

## Ответ:
A: 60
B: 30
C: 30
D: 30

Максимальная прибыль: 27

# Задание 4.2
Имеется 10 независимых заданий. Длительность заданий (по этапам): (6, 7), (4, 5), (3, 1), (2, 1), (6, 5), (2, 3), (5, 4), (6, 8), (4, 3), (3, 2).

## Создадим вспомогательную таблицу
|   Задание   |   A   |   B   |   C   |   D   |   E   |   F   |   G   |   H   |   I   |   J   |
|:------|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
| 1 этап | 6     | 4     | 3     | 2     | 6     | 2     | 5     | 6     | 4     | 3     |
| 2 этап | 7     | 5     | 1     | 1     | 5     | 3     | 4     | 8     | 3     | 2     |

## Алгоритм Джонсона
Для составления кратчайшего расписания будем использовать алгоритм Джонсона.

Разобьем список всех заданий на 2 группы:
- 1 группа: 1 этап ≤ 2 этап (A, B, F, H),
- 2 группа: 1 этап > 2 этап (C, D, E, G, I, J).

Задания из первой группы сортируем в порядке возрастания первых величин. Задания из второй группы отсортируем в порядке убывания вторых величин.

Получим: 1 группа - F, B, A, H; 2 группа - E, G, I, J, C, D.

Согласно алгоритму Джонсона, расписание получается кратчайшим, если сначала выполнить все задания из первой группы в отсортированном порядке, а затем — все задания из второй группы также в отсортированном порядке.

Соединяем две группы и получаем оптимальный порядок выполнения заданий: F, B, A, H, E, G, I, J, C, D

## Диаграмма Ганта
Составляем диаграмму Ганта и получаем ответ
### Ответ
Оптимальный порядок: **F, B, A, H, E, G, I, J, C, D**  
Минимальное время выполнения: **43** единицы времени

```mermaid
gantt
    title  Диаграмма Ганта 
    dateFormat HH
    axisFormat %H
    todayMarker off

    section I конвейер
    F           :s1f, 0, 2h
    B           :s1b, after s1f, 4h
    A           :s1a, after s1b, 6h
    H           :s1h, after s1a, 6h
    E           :s1e, after s1h, 6h
    G           :s1g, after s1e, 5h
    I           :s1i, after s1g, 4h
    J           :s1j, after s1i, 3h
    C           :s1c, after s1j, 3h
    D           :s1d, after s1c, 2h

    section II конвейер
    %% Ждём завершения первого конвейера F, поэтому старт после s1f
    F           :s2h, after s1f, 3h
    %% Ждём завершения первого конвейера B, поэтому старт после s1b
    B           :s2b, after s1b, 5h
    %% Ждём завершения первого конвейера A, поэтому старт после s1a
    A           :s2a, after s1a, 7h
    H           :s2h, after s2a, 8h
    E           :s2e, after s2h, 5h
    G           :s2g, after s2e, 4h
    I           :s2i, after s2g, 3h
    J           :s2j, after s2i, 2h
    C           :s2c, after s2j, 1h
    D           :s2d, after s2c, 1h

    Общее время 43 ед : milestone, m2, after s2d, 0h
