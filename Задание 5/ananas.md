
# Вариант 4
# Оптимальное расписание

---

## Условие задачи

### Задания и их длительности

|                  |  A  |  B  |  C  |  D  |  E  |  F  |
|:-----------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность (V) | 41  | 35  | 23  | 17  | 14  | 13  |

### Исполнители и производительности

|                           |  1  |  2  |  3  |  4  |
|:--------------------------|:---:|:---:|:---:|:---:|
| Производительность (pᵢ)   |  6  |  4  |  2  |  1  |

Задачи независимы, допускаются прерывания, каждый исполнитель может выполнять любую задачу.

---

## 1. Расчёт минимальной длительности по стратегии разделения процессоров

Минимальное возможное время оптимального расписания вычисляется по формуле:

$$  
T_{min} = \frac {V_1 + V_2 + ... + V_n}{p_1 + p_2 + ... + p_k}  
$$  

Подставим наши данные:

$$
V_1 + \dots + V_6 = 41 + 35 + 23 + 17 + 14 + 13 = 143
$$

$$
p_1 + \dots + p_4 = 6 + 4 + 2 + 1 = 13
$$

Тогда:

$$
T_{min} = \frac{143}{13} = 11 \text{ (часов)}
$$

Это теоретическая минимальная длительность расписания при условии, что все исполнители работают без простоев.

---

## 2. Начальные приоритеты задач

Приоритет определяется по объёму задачи: чем больше длительность, тем выше приоритет.

|              |  A  |  B  |  C  |  D  |  E  |  F  |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 41  | 35  | 23  | 17  | 14  | 13  |
| Приоритет    |  1  |  2  |  3  |  4  |  5  |  6  |

---

## 3. Первое назначение исполнителей

Назначаем самых быстрых исполнителей на самые приоритетные задачи:

- Исполнитель 1 (p₁ = 6) → **A**  
- Исполнитель 2 (p₂ = 4) → **B**  
- Исполнитель 3 (p₃ = 2) → **C**  
- Исполнитель 4 (p₄ = 1) → **D**

Задачи E и F пока не выполняются — свободных исполнителей нет.

Текущее состояние:

|                |  A  |  B  |  C  |  D  |  E  |  F  |
|:---------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Остаток V      | 41  | 35  | 23  | 17  | 14  | 13  |
| Исполнитель    |  1  |  2  |  3  |  4  |  -  |  -  |

---

## 4. Первый момент перераспределения (сравнение A и B)

Рассмотрим задачи A и B:

- A обрабатывается с производительностью 6:  
  $L_A(t) = 41 - 6t$
- B обрабатывается с производительностью 4:  
  $L_B(t) = 35 - 4t$

Ищем момент, когда их приоритеты сравняются:

$$
41 - 6t = 35 - 4t
$$

$$
6t - 4t = 41 - 35
$$

$$
2t = 6 \Rightarrow t = 3 \text{ (часа)}
$$

### Состояние задач через 3 часа

За 3 часа исполнители выполнят:

- Исполнитель 1: 6 * 3 = 18 единиц по задаче A  
- Исполнитель 2: 4 * 3 = 12 единиц по задаче B  
- Исполнитель 3: 2 * 3 = 6 единиц по задаче C  
- Исполнитель 4: 1 * 3 = 3 единицы по задаче D  

Обновим остатки:

- A: 41 − 18 = 23  
- B: 35 − 12 = 23  
- C: 23 − 6 = 17  
- D: 17 − 3 = 14  
- E: 14 (ещё не начинали)  
- F: 13 (ещё не начинали)

Таблица по отдельным задачам:

|                |  A  |  B  |  C  |  D  |  E  |  F  |
|:---------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Остаток V      | 23  | 23  | 17  | 14  | 14  | 13  |
| Исполнитель    |  1  |  2  |  3  |  4  |  -  |  -  |

У задач **D** и **E** одинаковый приоритет (по 14).  
Задачи с одинаковым приоритетом можно объединить в одну группу и закрепить за ней одного исполнителя.

**Объединяем D и E в группу DE**: приоритет группы DE считаем равным 14 (как у одной задачи, а не сумме):

|                |  A  |  B  |  C  |  DE |  F  |
|:---------------|:---:|:---:|:---:|:---:|:---:|
| Остаток V      | 23  | 23  | 17  | 14  | 13  |
| Исполнитель    |  1  |  2  |  3  |  4  |  -  |

Исполнитель 4 последовательно работает то над D, то над E, но приоритет группы мы отслеживаем как одну величину.

---

## 5. Объединяем A и B → группа AB и считаем следующий момент перераспределения

Теперь объединяем задачи A и B в одну группу **AB**, над которой работают исполнители 1 и 2.

|                |  AB |  C  |  DE |  F  |
|:---------------|:---:|:---:|:---:|:---:|
| Остаток V      | 23  | 17  | 14  | 13  |
| Исполнитель    | 1,2 |  3  |  4  |  -  |


Вводим производительность группы AB как среднюю по двум задачам:

$$
P_{AB} = \frac{p_1 + p_2}{2} = \frac{6 + 4}{2} = 5
$$

Скорость обработки задачи C:

$$
P_C = p_3 = 2
$$

Ищем момент \(t\), когда приоритеты AB и C сравняются:

$$
23 - 5t = 17 - 2t
$$

$$
23 - 17 = 5t - 2t
$$

$$
6 = 3t \Rightarrow t = 2 \text{ (часа)}
$$

---

## 6. Состояние задач через 5 часов от начала

За следующие 2 часа:

- группа AB уменьшится на 5 * 2 = 10;
- задача C уменьшится на 2 * 2 = 4;
- группа DE. Исполнитель 4 половину времени работал над D и половину над E. Тогда производительность группы DE — 0.5 единицы в час, и за 2 часа приоритет группы DE уменьшится на 1.

Обновим остатки:

- AB: 23 − 10 = 13  
- C: 17 − 4 = 13  
- DE: 14 − 1 = 13  
- F: 13  

Таблица:

|                |  AB |  C  |  DE |  F  |
|:---------------|:---:|:---:|:---:|:---:|
| Остаток V      | 13  | 13  | 13  | 13  |
| Исполнитель    | 1,2 |  3  |  4  |  -  |

Теперь **AB, C, DE и F** имеют одинаковый приоритет 13.

---

## 7. Объединяем задачи с одинаковым приоритетом

При одинаковом приоритете все задачи можно рассматривать как одну большую группу.  
Объединяем их в группу **ABCDEF**, к которой по стратегии разделения процессоров подключаем всех четырёх исполнителей:

|                | ABCDEF |
|:---------------|:------:|
| Остаток V      | 13     |
| Исполнители    | 1,2,3,4 |

Тогда производительность исполнителей равна:

$$
\frac{p_1 + p_2 + p_3 + p_4}{6} = \frac{6 + 4 + 2 + 1}{6} = \frac{13}{6}
$$

Поэтому оставшиеся 13 единиц работы дорабатываются за 6 часов.

Итоговое время работы от начала:

- 3 часа (первый этап)  
- + 2 часа (второй этап)  
- + 6 час (финальный этап общей группы)

Всего:

$$
T = 3 + 2 + 6 = 11 \text{ часов,}
$$

---

## 8. Диаграмма Ганта (Mermaid)

Ниже приведена укрупнённая диаграмма Ганта, отражающая основные этапы:

1. **0–3 ч** — раздельная работа над задачами A, B, C, D.  
2. **3–5 ч** — группы AB, C и DE (на DE работает один исполнитель).  
3. **5–11 ч** — объединённая группа ABCDEF, которую совместно выполняют все исполнители.

```mermaid
gantt
    title Диаграмма Ганта
    dateFormat HH:mm
    axisFormat %H:%M

    section Исполнитель 1
    A1 :t1_1, 00:00, 3h
    A2 :t1_2, after t1_1, 1h
    B1 :t1_3, after t1_2, 1h
    A3 :t1_4, after t1_3, 1h
    B2 :t1_5, after t1_4, 1h
    C1 :t1_6, after t1_5, 1h
    D1 :t1_7, after t1_6, 1h
    E1 :t1_8, after t1_7, 1h
    F1 :t1_9, after t1_8, 1h

    section Исполнитель 2
    B1 :t2_1, 00:00, 3h
    B2 :t2_2, after t2_1, 1h
    A1 :t2_3, after t2_2, 1h
    B3 :t2_4, after t2_3, 1h
    C2 :t2_5, after t2_4, 1h
    D2 :t2_6, after t2_5, 1h
    E2 :t2_7, after t2_6, 1h
    F2 :t2_8, after t2_7, 1h
    A2 :t2_9, after t2_8, 1h

    section Исполнитель 3
    C1 :t3_1, 00:00, 3h
    C2 :t3_2, after t3_1, 2h
    C3 :t3_3, after t3_2, 1h
    D3 :t3_4, after t3_3, 1h
    E3 :t3_5, after t3_4, 1h
    F3 :t3_6, after t3_5, 1h
    A3 :t3_7, after t3_6, 1h
    B3 :t3_8, after t3_7, 1h

    section Исполнитель 4
    D1 :t4_1, 00:00, 3h
    D2 :t4_2, after t4_1, 1h
    E1 :t4_3, after t4_2, 1h
    D3 :t4_4, after t4_3, 1h
    E2 :t4_5, after t4_4, 1h
    F1 :t4_6, after t4_5, 1h
    A1 :t4_7, after t4_6, 1h
    B1 :t4_8, after t4_7, 1h
    C1 :t4_9, after t4_8, 1h